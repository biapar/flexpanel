!function(a){"use strict";a.flexpanel=function(b,c){var d={animation:"slide",direction:"right",wrapper:"#wrapper",maxWidth:null,button:".flex-btn"},c=a.extend(d,c),e=a(b),f=c.animation,g=c.direction,h=a(c.wrapper),i=c.maxWidth,j=a(c.button),k="flexpanel",l=a(window).width(),m=navigator.userAgent.match(/iemobile|android|webos|iphone|ipad|ipod|blackberry|bb10/i)?!0:!1,n=!1,o=a("body");if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var p=navigator.userAgent;p.match(/MSIE 9.0/i)&&(a("body").addClass("ie9"),n=!0),(p.match(/MSIE 8.0/i)||p.match(/MSIE 7.0/i))&&(a("body").addClass("isIE"),n=!0)}var q={init:function(){a("body").addClass(k+"-"+g+" "+k+"-"+f+" "+k+"-hide"),"reveal"===f?(j.append('<a href="javascript:void(0);"><span class="one"></span><span class="two"></span><span class="three"></span></a>'),j.appendTo(o)):j.append('<a href="javascript:void(0);"><span class="one"></span><span class="two"></span><span class="three"></span></a>'),j.addClass("in-view"),(null===i||i>=l)&&(a("body").removeClass("flexpanel-hide"),e.delay(500).fadeIn(250)),"reveal"===f&&e.addClass("reveal"),a.fn.hammer&&m&&q.touch()},slide:function(b){switch(b){case"open":o.addClass("flexpanel-active"),a(".viewport",e).addClass("smooth");break;case"close":a(".viewport",e).animate({scrollTop:0},500,function(){a(".viewport",e).removeClass("smooth")}),o.removeClass("flexpanel-active"),a(document).on("touchmove",function(){return!0});break;default:o.hasClass("flexpanel-active")?(a(".viewport",e).animate({scrollTop:0},500,function(){a(".viewport",e).removeClass("smooth")}),h.unbind("click"),o.removeClass("flexpanel-active"),a(document).on("touchmove",function(){return!0})):(o.addClass("flexpanel-active"),a(".viewport",e).addClass("smooth"),setTimeout(function(){h.delay(250).unbind("click").bind("click",q.slide)},250))}},touch:function(){if(j.hammer().on("swipe, drag",function(b){switch(g){case"right":"right"===b.gesture.direction&&a("body").hasClass("flexpanel-active")&&q.slide();break;case"left":"left"===b.gesture.direction&&a("body").hasClass("flexpanel-active")&&q.slide();break;case"top":"up"===b.gesture.direction&&a("body").hasClass("flexpanel-active")&&q.slide()}}),j.hammer().on("swipe, drag",function(b){switch(g){case"right":"left"!==b.gesture.direction||a("body").hasClass("flexpanel-active")||q.slide();break;case"left":"right"!==b.gesture.direction||a("body").hasClass("flexpanel-active")||q.slide()}}),"top"===g&&j.hammer().on("swipe, drag",function(a){"down"!==a.gesture.direction||o.hasClass("flexpanel-active")||q.slide()}),"left"===g||"right"===g){var b=/iemobile/i.test(navigator.userAgent.toLowerCase());b||(o.hammer().on("dragdown",function(a){a.gesture.deltaTime>50}),o.hammer().on("dragup",function(b){var c=a(window).scrollTop();b.gesture.deltaTime>50&&c>100}))}}};q.init(),j.on("click",function(){q.slide()}),a("ul li a",e).click(function(){var b=a(this),c=b.attr("href");if(b.hasClass("anchor")){q.slide();var d=a(c).offset(),e=d.top;a("html, body").animate({scrollTop:e},500)}}),a(window).resize(function(){l=a(window).width(),null===i?e.show():l>i?a("body.flexpanel-active")&&a("body").removeClass("flexpanel-active").addClass("flexpanel-hide"):(e.show(),a("body").removeClass("flexpanel-hide"))}),a(".viewport",e).bind("touchstart",function(){}),a(window).scroll(function(){var b=a(window).scrollTop();100>b&&j.addClass("in-view")}),a(document).on("touchmove",function(a){o.hasClass("flexpanel-active")&&a.preventDefault()}),o.on("touchstart",".viewport",function(a){0===a.currentTarget.scrollTop?a.currentTarget.scrollTop=1:a.currentTarget.scrollHeight===a.currentTarget.scrollTop+a.currentTarget.offsetHeight&&(a.currentTarget.scrollTop-=1)}),o.on("touchmove",".viewport",function(a){a.stopPropagation()}),a(".viewport").bind("mousewheel DOMMouseScroll",function(b){var c=null;"mousewheel"==b.type?c=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"==b.type&&(c=40*b.originalEvent.detail),c&&(b.preventDefault(),a(this).scrollTop(c+a(this).scrollTop()))}),a.fn.flexpanel.toggle=function(){q.slide()},a.fn.flexpanel.open=function(){q.slide("open")},a.fn.flexpanel.close=function(){q.slide("close")}},a.fn.flexpanel=function(b){new a.flexpanel(this,b)}}(jQuery);