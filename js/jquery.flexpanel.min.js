!function(a){"use strict";a.flexpanel=function(b,c){var d={animation:"slide",direction:"right",wrapper:"#wrapper",button:".flex-btn"},c=a.extend(d,c),e=a(b),f=c.animation,g=c.direction,h=a(c.wrapper),i=a(c.button),j="flexpanel",k=navigator.userAgent.match(/iemobile|android|webos|iphone|ipad|ipod|blackberry|bb10/i)?!0:!1,l=!1,m=a("body");if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var n=navigator.userAgent;n.match(/MSIE 9.0/i)&&(a("body").addClass("ie9"),l=!0),(n.match(/MSIE 8.0/i)||n.match(/MSIE 7.0/i))&&(a("body").addClass("isIE"),l=!0)}var o={init:function(){a("body").addClass(j+"-"+g+" "+j+"-"+f),"reveal"===f?(i.append('<a href="javascript:void(0);"><span class="one"></span><span class="two"></span><span class="three"></span></a>'),i.appendTo(m)):i.append('<a href="javascript:void(0);"><span class="one"></span><span class="two"></span><span class="three"></span></a>'),i.addClass("in-view"),e.delay(500).fadeIn(250),"reveal"===f&&e.addClass("reveal"),a.fn.hammer&&k&&o.touch()},slide:function(b){switch(b){case"open":m.addClass("flexpanel-active"),a(".viewport",e).addClass("smooth");break;case"close":a(".viewport",e).animate({scrollTop:0},500,function(){a(".viewport",e).removeClass("smooth")}),m.removeClass("flexpanel-active"),a(document).on("touchmove",function(){return!0});break;default:m.hasClass("flexpanel-active")?(a(".viewport",e).animate({scrollTop:0},500,function(){a(".viewport",e).removeClass("smooth")}),h.unbind("click"),m.removeClass("flexpanel-active"),a(document).on("touchmove",function(){return!0})):(m.addClass("flexpanel-active"),a(".viewport",e).addClass("smooth"),setTimeout(function(){h.delay(250).unbind("click").bind("click",o.slide)},250))}},touch:function(){if(i.hammer().on("swipe, drag",function(b){switch(g){case"right":"right"===b.gesture.direction&&a("body").hasClass("flexpanel-active")&&o.slide();break;case"left":"left"===b.gesture.direction&&a("body").hasClass("flexpanel-active")&&o.slide();break;case"top":"up"===b.gesture.direction&&a("body").hasClass("flexpanel-active")&&o.slide()}}),i.hammer().on("swipe, drag",function(b){switch(g){case"right":"left"!==b.gesture.direction||a("body").hasClass("flexpanel-active")||o.slide();break;case"left":"right"!==b.gesture.direction||a("body").hasClass("flexpanel-active")||o.slide()}}),"top"===g&&i.hammer().on("swipe, drag",function(a){"down"!==a.gesture.direction||m.hasClass("flexpanel-active")||o.slide()}),"left"===g||"right"===g){var b=/iemobile/i.test(navigator.userAgent.toLowerCase());b||(m.hammer().on("dragdown",function(a){a.gesture.deltaTime>50}),m.hammer().on("dragup",function(b){var c=a(window).scrollTop();b.gesture.deltaTime>50&&c>100}))}}};o.init(),i.on("click",function(){o.slide()}),a("ul li a",e).click(function(){var b=a(this),c=b.attr("href");if(b.hasClass("anchor")){o.slide();var d=a(c).offset(),e=d.top;a("html, body").animate({scrollTop:e},500)}}),a(".viewport",e).bind("touchstart",function(){}),a(window).scroll(function(){var b=a(window).scrollTop();100>b&&i.addClass("in-view")}),a(document).on("touchmove",function(a){m.hasClass("flexpanel-active")&&a.preventDefault()}),m.on("touchstart",".viewport",function(a){0===a.currentTarget.scrollTop?a.currentTarget.scrollTop=1:a.currentTarget.scrollHeight===a.currentTarget.scrollTop+a.currentTarget.offsetHeight&&(a.currentTarget.scrollTop-=1)}),m.on("touchmove",".viewport",function(a){a.stopPropagation()}),a(".viewport").bind("mousewheel DOMMouseScroll",function(b){var c=null;"mousewheel"==b.type?c=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"==b.type&&(c=40*b.originalEvent.detail),c&&(b.preventDefault(),a(this).scrollTop(c+a(this).scrollTop()))}),a.fn.flexpanel.toggle=function(){o.slide()},a.fn.flexpanel.open=function(){o.slide("open")},a.fn.flexpanel.close=function(){o.slide("close")}},a.fn.flexpanel=function(b){new a.flexpanel(this,b)}}(jQuery);