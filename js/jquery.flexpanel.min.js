!function(a){"use strict";a.flexpanel=function(b,c){var d={direction:"right",wrapper:"#wrapper",button:".flex-btn",maxWidth:null,speed:500},c=a.extend(d,c),e=a(b),f=c.direction,g=(a(c.wrapper),a(c.button)),h=c.maxWidth,i=c.speed,j=a(window).width(),k=navigator.userAgent.match(/iemobile|android|webos|iphone|ipad|ipod|blackberry|bb10/i)?!0:!1,l=!1,m=a("body");if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var n=navigator.userAgent;n.match(/MSIE 9.0/i)&&(a("body").addClass("ie9"),l=!0),(n.match(/MSIE 8.0/i)||n.match(/MSIE 7.0/i))&&(a("body").addClass("isIE"),l=!0)}var o={init:function(){a("body").addClass("flexpanel-"+f),e.append('<div class="cover"/>'),g.append('<span class="one"></span><span class="two"></span><span class="three"></span>'),g.addClass("in-view"),(null===h||h>=j)&&e.delay(250).fadeIn(250),a.fn.hammer&&k&&o.touch()},slide:function(b){switch(b){case"open":a("body").addClass("flexpanel-active"),a(".viewport",e).addClass("smooth");break;case"close":a(".viewport",e).animate({scrollTop:0},500,function(){a(".viewport",e).removeClass("smooth")}),a("body").removeClass("flexpanel-active"),a(document).on("touchmove",function(){return!0});break;default:a("body").hasClass("flexpanel-active")?(a(".viewport",e).animate({scrollTop:0},500,function(){a(".viewport",e).removeClass("smooth")}),a("body").removeClass("flexpanel-active"),a(document).on("touchmove",function(){return!0})):(a("body").addClass("flexpanel-active"),a(".viewport",e).addClass("smooth"))}},touch:function(){if(a(".cover").add(g).hammer().on("swipe, drag",function(b){switch(f){case"right":"right"===b.gesture.direction&&a("body").hasClass("flexpanel-active")&&o.slide();break;case"left":"left"===b.gesture.direction&&a("body").hasClass("flexpanel-active")&&o.slide();break;case"top":"up"===b.gesture.direction&&a("body").hasClass("flexpanel-active")&&o.slide()}}),g.hammer().on("swipe, drag",function(b){switch(f){case"right":"left"!==b.gesture.direction||a("body").hasClass("flexpanel-active")||o.slide();break;case"left":"right"!==b.gesture.direction||a("body").hasClass("flexpanel-active")||o.slide()}}),"top"===f&&g.hammer().on("swipe, drag",function(a){"down"!==a.gesture.direction||m.hasClass("flexpanel-active")||o.slide()}),"left"===f||"right"===f){var b=/iemobile/i.test(navigator.userAgent.toLowerCase());b||(m.hammer().on("dragdown",function(a){a.gesture.deltaTime>50&&g.addClass("in-view")}),m.hammer().on("dragup",function(b){var c=a(window).scrollTop();b.gesture.deltaTime>50&&c>100&&g.removeClass("in-view")}))}}};o.init(),g.click(o.slide),a(".cover").click(o.slide),a("ul li a",e).click(function(){var b=a(this),c=b.attr("href");if(b.hasClass("anchor")){o.slide();var d=a(c).offset(),e=d.top;a("html, body").animate({scrollTop:e},i)}}),a(".viewport",e).bind("touchstart",function(){}),a(window).scroll(function(){var b=a(window).scrollTop();100>b&&g.addClass("in-view")}),a(document).on("touchmove",function(a){m.hasClass("flexpanel-active")&&a.preventDefault()}),m.on("touchstart",".viewport",function(a){0===a.currentTarget.scrollTop?a.currentTarget.scrollTop=1:a.currentTarget.scrollHeight===a.currentTarget.scrollTop+a.currentTarget.offsetHeight&&(a.currentTarget.scrollTop-=1)}),m.on("touchmove",".viewport",function(a){a.stopPropagation()}),a(".viewport").bind("mousewheel DOMMouseScroll",function(b){var c=null;"mousewheel"==b.type?c=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"==b.type&&(c=40*b.originalEvent.detail),c&&(b.preventDefault(),a(this).scrollTop(c+a(this).scrollTop()))}),a.fn.flexpanel.toggle=function(){o.slide()},a.fn.flexpanel.open=function(){o.slide("open")},a.fn.flexpanel.close=function(){o.slide("close")}},a.fn.flexpanel=function(b){new a.flexpanel(this,b)}}(jQuery);