(function(e){"use strict";e.flexpanel=function(t,n){var r={animation:"slide",direction:"right",wrapper:"#wrapper",maxWidth:null,button:".flex-btn"};var n=e.extend(r,n);var i=e(t),s=n.animation,o=n.direction,u=e(n.wrapper),a=n.maxWidth,f=e(n.button),l="flexpanel",c=e(window).width(),h=navigator.userAgent.match(/iemobile|android|webos|iphone|ipad|ipod|blackberry|bb10/i)?true:false,p=false,d=e("body");if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var v=navigator.userAgent;if(v.match(/MSIE 9.0/i)){e("body").addClass("ie9");p=true}if(v.match(/MSIE 8.0/i)||v.match(/MSIE 7.0/i)){e("body").addClass("isIE");p=true}}var m={init:function(){e("body").addClass(l+"-"+o+" "+l+"-"+s+" "+l+"-hide");if(s==="reveal"){f.append('<a href="javascript:void(0);"><span class="one"></span><span class="two"></span><span class="three"></span></a>');f.appendTo(d)}else{f.append('<a href="javascript:void(0);"><span class="one"></span><span class="two"></span><span class="three"></span></a>')}f.addClass("in-view");if(a===null||c<=a){e("body").removeClass("flexpanel-hide");i.delay(500).fadeIn(250)}if(s==="reveal")i.addClass("reveal");if(e.fn.hammer)m.touch()},slide:function(t){switch(t){case"open":d.addClass("flexpanel-active");e(".viewport",i).addClass("smooth");break;case"close":e(".viewport",i).animate({scrollTop:0},500,function(){e(".viewport",i).removeClass("smooth")});d.removeClass("flexpanel-active");e(document).on("touchmove",function(e){return true});break;default:if(d.hasClass("flexpanel-active")){e(".viewport",i).animate({scrollTop:0},500,function(){e(".viewport",i).removeClass("smooth")});u.unbind("click");d.removeClass("flexpanel-active");e(document).on("touchmove",function(e){return true})}else{d.addClass("flexpanel-active");e(".viewport",i).addClass("smooth");setTimeout(function(){u.delay(250).unbind("click").bind("click",m.slide)},250)}}},touch:function(){f.hammer().bind("swipeleft swiperight",function(t){var n=t.type;switch(o){case"right":if(n==="swipeleft"&&!e("body").hasClass("flexpanel-active")){m.slide()}if(n==="swiperight"&&e("body").hasClass("flexpanel-active")){m.slide()}break;case"left":if(n==="swiperight"&&!e("body").hasClass("flexpanel-active")){m.slide()}if(n==="swipeleft"&&e("body").hasClass("flexpanel-active")){m.slide()}break}})}};m.init();f.on("click",function(){m.slide()});e("ul li a",i).click(function(){var t=e(this);var n=t.attr("href");if(t.hasClass("anchor")){m.slide();var r=e(n).offset();var i=r.top;e("html, body").animate({scrollTop:i},500)}});e(window).resize(function(){c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(a===null){i.show()}else{if(c>a){if(e("body.flexpanel-active")){e("body").removeClass("flexpanel-active").addClass("flexpanel-hide");u.unbind("click")}}else{i.show();e("body").removeClass("flexpanel-hide")}}});var g=function(){var e=0;return function(t,n){clearTimeout(e);e=setTimeout(t,n)}}();e(".viewport",i).bind("touchstart",function(e){});e(window).scroll(function(){var t=e(window).scrollTop();if(t<100){f.addClass("in-view")}});e(document).on("touchmove",function(e){if(d.hasClass("flexpanel-active")){e.preventDefault()}});d.on("touchstart",".viewport",function(e){if(e.currentTarget.scrollTop===0){e.currentTarget.scrollTop=1}else if(e.currentTarget.scrollHeight===e.currentTarget.scrollTop+e.currentTarget.offsetHeight){e.currentTarget.scrollTop-=1}});d.on("touchmove",".viewport",function(e){e.stopPropagation()});e(".viewport").bind("mousewheel DOMMouseScroll",function(t){var n=null;if(t.type=="mousewheel"){n=t.originalEvent.wheelDelta*-1}else if(t.type=="DOMMouseScroll"){n=40*t.originalEvent.detail}if(n){t.preventDefault();e(this).scrollTop(n+e(this).scrollTop())}});e.fn.flexpanel.toggle=function(){m.slide()};e.fn.flexpanel.open=function(){m.slide("open")};e.fn.flexpanel.close=function(){m.slide("close")}};e.fn.flexpanel=function(t){new e.flexpanel(this,t)}})(jQuery) 